version: '3.7'
services:
  discord-2000:
    container_name: "discord-2000"
    user: node

    build:
      context: .
      dockerfile: Dockerfile
      args:
        - token=${token}
        - cmdPrefix=${cmdPrefix}
        - NODE_ENV=production

    network_mode: host

    volumes:
      - .:/app:cached,Z
  
    environment:
      - token=${token}
      - cmdPrefix=${cmdPrefix}
      - presence_text_channel_updates=${presence_text_channel_updates}
      - enable_presence_updates=${enable_presence_updates}
      - timezone=${timezone}
      - NODE_ENV=production
  
    restart: always
    command: npm run start

volumes:
  discord-2000:
